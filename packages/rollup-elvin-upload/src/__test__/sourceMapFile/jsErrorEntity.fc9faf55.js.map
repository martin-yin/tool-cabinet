{"version":3,"file":"jsErrorEntity.fc9faf55.js","sources":["../../src/domain/jserror/adapter/repositories/mapper/jsErrorWebRepositoryMapper.ts","../../src/domain/jserror/model/jsErrorEntity.ts"],"sourcesContent":["import { CasedProperties } from '@/infrastructure/interface'\r\nimport { toUpperCaseData } from '@/infrastructure/lib'\r\nimport moment from 'moment'\r\nimport { JsErrorEntity, JsErrorListEntity } from '../../../model/jsErrorEntity'\r\nimport { JsErrorListModel, JsErrorModel } from '../../../model/jsErrorModel'\r\n\r\nabstract class JsErrorRepositoryMapper {\r\n  abstract mapFromJsErrorListModel(params: JsErrorListEntity): JsErrorListModel\r\n\r\n  abstract mapFromJsErrorModel(params: JsErrorEntity): JsErrorModel\r\n}\r\n\r\n// Todo: 替换load hash\r\n\r\nexport class JsErrorWebRepositoryMapper implements JsErrorRepositoryMapper {\r\n  mapFromJsErrorModel(params: JsErrorEntity): CasedProperties<JsErrorEntity> {\r\n    params.stack_frames = JSON.parse(params.stack_frames)\r\n    return toUpperCaseData(params) as any\r\n  }\r\n  mapFromJsErrorListModel(params: JsErrorListEntity): JsErrorListModel {\r\n    return params.map(item => {\r\n      const model = toUpperCaseData<JsErrorEntity, JsErrorModel>(item)\r\n      model.lastTime = moment(+model.lastTime).fromNow()\r\n      model.firstTime = moment(+model.firstTime).fromNow()\r\n      return model\r\n    })\r\n  }\r\n}\r\n","import { FilterHeaderParams } from '@/features/filterHeader/hook/useFilterHeaderInit'\r\nimport { IResponse } from '@/infrastructure/lib/request'\r\nimport { GetJsErrorParamModel } from './jsErrorModel'\r\n\r\nexport abstract class JsErrorRepository {\r\n  abstract getJsErrorList(param: FilterHeaderParams): Promise<IResponse<JsErrorListEntity>>\r\n  abstract getJsError(param: GetJsErrorParamModel): Promise<IResponse<JsErrorEntity>>\r\n}\r\n\r\nexport interface JsErrorEntity {\r\n  id: number\r\n  page_url: string\r\n  componentName: string\r\n  message: string\r\n  stack: string\r\n  error_name: string\r\n  stack_frames: string\r\n  js_issues_id: number\r\n  previous_error_id: number\r\n  next_error_id: number\r\n  user_id: string\r\n  monitor_id: string\r\n  action_type: string\r\n  happen_time: number\r\n  happen_day: string\r\n  ip: string\r\n  session_id: string\r\n  device: string\r\n  device_type: string\r\n  os: string\r\n  os_version: string\r\n  browser: string\r\n  browser_version: string\r\n  ua: string\r\n  nation: string\r\n  province: string\r\n  city: string\r\n  district: string\r\n  created_at: string\r\n  total: string\r\n  today: string\r\n  error_user: string\r\n  last_time: string\r\n  first_time: string\r\n}\r\n\r\nexport type JsErrorListEntity = Array<JsErrorEntity>\r\n"],"names":["JsErrorWebRepositoryMapper","mapFromJsErrorModel","params","stack_frames","JSON","parse","toUpperCaseData","mapFromJsErrorListModel","map","item","model","lastTime","moment","fromNow","firstTime","JsErrorRepository"],"mappings":"iFAKO,MAAMA,CAA2B,CACpCC,oBAAoBC,EAAQ,CACxBA,SAAOC,aAAeC,KAAKC,MAAMH,EAAOC,YAAlB,EACfG,EAAgBJ,CAAD,CACzB,CACDK,wBAAwBL,EAAQ,CAC5B,MAAOA,GAAOM,IAAIC,GAAQ,CACtB,KAAMC,GAAQJ,EAAgBG,CAAD,EAC7BC,SAAMC,SAAWC,EAAO,CAACF,EAAMC,QAAR,EAAkBE,UACzCH,EAAMI,UAAYF,EAAO,CAACF,EAAMI,SAAR,EAAmBD,UACpCH,CACV,CALM,CAMV,CAZmC,CCLjC,MAAMK,CAAkB,CAAA"}